<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.Insets?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns:fx="http://javafx.com/fxml" 
            fx:controller="com.unieats.controllers.MenuController" 
            style="-fx-background-color: transparent;"
            prefWidth="360" 
            prefHeight="800"
            maxWidth="360"
            maxHeight="800">

    <center>
        <ScrollPane style="-fx-background-color: transparent; -fx-background: transparent;"
                    fitToWidth="true"
                    hbarPolicy="NEVER"
                    vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="0" style="-fx-background-color: transparent;">
        
        <!-- Top Status Bar -->
        
        
        <!-- Location Bar
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: transparent; -fx-padding: 16;">
            <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-cursor: hand; -fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-padding: 8 12;">
                <Text text="📍" style="-fx-font-size: 18px;"/>
                <VBox spacing="2">
                    <Label text="Location" style="-fx-font-size: 11px; -fx-text-fill: #6c757d;"/>
                    <Label text="Al Safa Street, Al Wasi" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
                </VBox>
                <Text text="▼" style="-fx-font-size: 10px; -fx-text-fill: #6c757d;"/>
            </HBox>
            <Region HBox.hgrow="ALWAYS"/>
            <StackPane style="-fx-cursor: hand; -fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-padding: 8;">
                <Text text="🛍️" style="-fx-font-size: 20px;"/>
                <StackPane alignment="TOP_RIGHT" style="-fx-padding: 0 0 0 0;">
                    <Circle radius="10" fill="#ff6b35"/>
                    <Label text="2" style="-fx-font-size: 10px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                </StackPane>
            </StackPane>
        </HBox>
        -->
        
        <!-- Header matching reference design -->
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: #ffffff; -fx-padding: 16; -fx-border-color: #f0f0f0; -fx-border-width: 0 0 1 0;">
            <HBox alignment="CENTER_LEFT" spacing="8">
                <FontIcon iconLiteral="fas-th-large" iconSize="18" iconColor="#2d3436"/>
                <Label text="UniEats" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
            </HBox>
            <Region HBox.hgrow="ALWAYS"/>
            <HBox alignment="CENTER_RIGHT" spacing="8">
                <StackPane style="-fx-background-color: #f8f9fa; -fx-background-radius: 16; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-bell" iconSize="14" iconColor="#2d3436"/>
                </StackPane>
            </HBox>
        </HBox>

        <!-- Welcome + Notification row -->
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: transparent; -fx-padding: 16 16 0 16;">
            <VBox spacing="4">
                <Label text="Good Morning" style="-fx-font-size: 12px; -fx-text-fill: #6c757d;"/>
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label fx:id="userNameLabel" text="Louis A." style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
                    <Label text="👋" style="-fx-font-size: 18px;"/>
                </HBox>
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <!-- Notification pill -->
            <HBox alignment="CENTER" spacing="6">
                <StackPane style="-fx-background-color: #eaf1ea; -fx-background-radius: 20; -fx-padding: 6;">
                    <Label fx:id="rewardPointsLabel" text="6" style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
                </StackPane>
                <StackPane style="-fx-background-color: #f0c54b; -fx-background-radius: 20; -fx-padding: 6;">
                    <FontIcon iconLiteral="fas-coins" iconSize="14" iconColor="#ffffff"/>
                </StackPane>
            </HBox>
        </HBox>

        <!-- Search bar (single, rounded) -->
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: transparent; -fx-padding: 12 16 16 16;">
            <HBox style="-fx-background-color: #f6f8f6; -fx-background-radius: 16; -fx-padding: 12 14; -fx-spacing: 8; -fx-alignment: center_left; -fx-pref-width: 328;">
                <FontIcon iconLiteral="fas-search" iconSize="16" iconColor="#6c757d"/>
                <TextField fx:id="searchField" promptText="Search beverages or foods" 
                           style="-fx-background-color: transparent; -fx-border-width: 0; -fx-text-fill: #2d3436; -fx-prompt-text-fill: #9aa0a6; -fx-font-size: 14px; -fx-pref-height: 30; -fx-pref-width: 280;"/>
                <!-- Keep filterButton hidden to avoid controller errors if referenced -->
                <Button fx:id="filterButton" visible="false" managed="false" />
            </HBox>
        </HBox>
        
        <!-- Categories Section -->
        <VBox style="-fx-padding: 20; -fx-background-color: transparent; -fx-margin: 8 0;">
            <HBox alignment="CENTER_LEFT" spacing="8">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <FontIcon iconLiteral="fas-utensils" iconSize="18" iconColor="#2d3436"/>
                    <Label text="Categories" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>
                <!--<Button text="See all ➡️" style="-fx-text-fill: #ff6b35; -fx-background-color: transparent; -fx-padding: 0; -fx-font-size: 12px; -fx-cursor: hand; -fx-font-weight: bold;"/>-->
            </HBox>
            
            <HBox spacing="16" style="-fx-padding: 16 0 0 0;">
                <VBox fx:id="foodCategoryButton" alignment="CENTER" spacing="8" style="-fx-cursor: hand;">
                    <StackPane style="-fx-background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%); -fx-background-radius: 20; -fx-padding: 16; -fx-pref-width: 60; -fx-pref-height: 60; -fx-effect: dropshadow(gaussian, rgba(76,175,80,0.3), 6, 0, 0, 3);">
                        <FontIcon iconLiteral="fas-pizza-slice" iconSize="28" iconColor="Blue"/>
                    </StackPane>
                    <Label text="Food" style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                </VBox>
                
                <VBox fx:id="storesCategoryButton" alignment="CENTER" spacing="8" style="-fx-cursor: hand;">
                    <StackPane style="-fx-background: linear-gradient(135deg, #2196f3 0%, #42a5f5 100%); -fx-background-radius: 20; -fx-padding: 16; -fx-pref-width: 60; -fx-pref-height: 60; -fx-effect: dropshadow(gaussian, rgba(33,150,243,0.3), 6, 0, 0, 3);">
                        <FontIcon iconLiteral="fas-store" iconSize="28" iconColor="Blue"/>
                    </StackPane>
                    <Label text="Stores" style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                </VBox>
                
                <VBox fx:id="reportButton" alignment="CENTER" spacing="8" style="-fx-cursor: hand;">
                    <StackPane style="-fx-background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); -fx-background-radius: 20; -fx-padding: 16; -fx-pref-width: 60; -fx-pref-height: 60; -fx-effect: dropshadow(gaussian, rgba(231,76,60,0.3), 6, 0, 0, 3);">
                        <FontIcon iconLiteral="fas-flag" iconSize="28" iconColor="Blue"/>
                    </StackPane>
                    <Label text="Report" style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                </VBox>
                
                <!--<VBox alignment="CENTER" spacing="8" style="-fx-cursor: hand;">
                    <StackPane style="-fx-background: linear-gradient(135deg, #ff9800 0%, #ffb74d 100%); -fx-background-radius: 20; -fx-padding: 16; -fx-pref-width: 60; -fx-pref-height: 60; -fx-effect: dropshadow(gaussian, rgba(255,152,0,0.3), 6, 0, 0, 3);">
                        <Text text="🥬" style="-fx-font-size: 28px;"/>
                    </StackPane>
                    <Label text="Groceries" style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                </VBox>
                
                <VBox alignment="CENTER" spacing="8" style="-fx-cursor: hand;">
                    <StackPane style="-fx-background: linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%); -fx-background-radius: 20; -fx-padding: 16; -fx-pref-width: 60; -fx-pref-height: 60; -fx-effect: dropshadow(gaussian, rgba(156,39,176,0.3), 6, 0, 0, 3);">
                        <Text text="✨" style="-fx-font-size: 28px;"/>
                    </StackPane>
                    <Label text="More" style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                </VBox>-->
            </HBox>
        </VBox>
        
        <!-- Picks For You Section -->
        <VBox style="-fx-padding: 20 0 20 0; -fx-spacing: 12; -fx-background-color: transparent;">
            <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 0 20 0 20;">
                <FontIcon iconLiteral="fas-star" iconSize="18" iconColor="#FFD700"/>
                <Label text="Picks For You" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2d3436;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="See All" style="-fx-text-fill: #ff6b35; -fx-font-size: 14px; -fx-cursor: hand;" onMouseClicked="#handleSeeAllClick">
                    <userData>
                        <fx:reference source="foodCategoryButton"/>
                    </userData>
                </Label>
            </HBox>
            
            <!-- Horizontal Scrollable Food Items -->
            <StackPane style="-fx-padding: 0 0 20 0; -fx-min-height: 300;">
                <ScrollPane fx:id="scrollPane" 
                           style="-fx-background-color: transparent; -fx-padding: 0; -fx-hbar-policy: never; -fx-vbar-policy: never;"
                           fitToWidth="false"
                           hbarPolicy="never"
                           vbarPolicy="never">
                    <HBox fx:id="foodItemsContainer" spacing="16" style="-fx-padding: 0 20 0 20; -fx-alignment: center-left;">
                        <!-- Content will be populated by MenuController -->
                    </HBox>
                </ScrollPane>
                
                <!-- Navigation Buttons -->
                <Button fx:id="leftScrollButton" 
                        text="❮" 
                        style="-fx-background-color: white; -fx-background-radius: 50%; -fx-text-fill: #ff6b35; -fx-font-size: 16; -fx-min-width: 32; -fx-min-height: 32; -fx-padding: 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" 
                        onAction="#scrollLeft">
                    <StackPane.margin>
                        <Insets left="20.0" right="0" top="0" bottom="0"/>
                    </StackPane.margin>
                    <StackPane.alignment>CENTER_LEFT</StackPane.alignment>
                </Button>
                        
                <Button fx:id="rightScrollButton"
                        text="❯" 
                        style="-fx-background-color: white; -fx-background-radius: 50%; -fx-text-fill: #ff6b35; -fx-font-size: 16; -fx-min-width: 32; -fx-min-height: 32; -fx-padding: 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" 
                        onAction="#scrollRight">
                    <StackPane.margin>
                        <Insets right="20.0" left="0" top="0" bottom="0"/>
                    </StackPane.margin>
                    <StackPane.alignment>CENTER_RIGHT</StackPane.alignment>
                </Button>
            </StackPane>
        </VBox>
        </VBox>
            </content>
        </ScrollPane>
    </center>
    
    <bottom>
        <HBox alignment="CENTER" spacing="0" style="-fx-background-color: #ffffff; -fx-padding: 12 0; -fx-border-color: #f0f0f0; -fx-border-width: 1 0 0 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, -2);">
            <!-- Home -->
            <VBox fx:id="navHome" alignment="CENTER" spacing="4" style="-fx-cursor: hand; -fx-pref-width: 72;">
                <StackPane style="-fx-background-color: #e8f5e9; -fx-background-radius: 12; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-home" iconSize="20" iconColor="#2e7d32"/>
                </StackPane>
                <Label text="Home" style="-fx-font-size: 10px; -fx-text-fill: #2e7d32; -fx-font-weight: bold;"/>
            </VBox>
            <!-- Orders -->
            <VBox fx:id="navOrders" alignment="CENTER" spacing="4" style="-fx-cursor: hand; -fx-pref-width: 72;">
                <StackPane style="-fx-background-radius: 12; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-list-alt" iconSize="20" iconColor="#6c757d"/>
                </StackPane>
                <Label text="My Orders" style="-fx-font-size: 10px; -fx-text-fill: #6c757d;"/>
            </VBox>
            <!-- Cart -->
            <VBox fx:id="navCart" alignment="CENTER" spacing="4" style="-fx-cursor: hand; -fx-pref-width: 72;">
                <StackPane style="-fx-background-radius: 12; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-shopping-cart" iconSize="20" iconColor="#6c757d"/>
                </StackPane>
                <Label text="Cart" style="-fx-font-size: 10px; -fx-text-fill: #6c757d;"/>
            </VBox>
            <!-- Favourite -->
            <VBox fx:id="navFav" alignment="CENTER" spacing="4" style="-fx-cursor: hand; -fx-pref-width: 72;">
                <StackPane style="-fx-background-radius: 12; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-heart" iconSize="20" iconColor="#6c757d"/>
                </StackPane>
                <Label text="Favourite" style="-fx-font-size: 10px; -fx-text-fill: #6c757d;"/>
            </VBox>
            <!-- Profile -->
            <VBox fx:id="navProfile" alignment="CENTER" spacing="4" style="-fx-cursor: hand; -fx-pref-width: 72;">
                <StackPane style="-fx-background-radius: 12; -fx-padding: 8;">
                    <FontIcon iconLiteral="fas-user" iconSize="20" iconColor="#6c757d"/>
                </StackPane>
                <Label text="Profile" style="-fx-font-size: 10px; -fx-text-fill: #6c757d;"/>
            </VBox>
        </HBox>
    </bottom>
</BorderPane>